(node:48804) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
--import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
(Use `node --trace-warnings ...` to show where the warning was created)
(node:48804) [DEP0180] DeprecationWarning: fs.Stats constructor is deprecated.
(Use `node --trace-deprecation ...` to show where the warning was created)


  NodeTypeScriptGenerator
    declarationGenerate
▶ token-storage
  ▶ saveAuthConfig
    ✖ should save a single profile with comment (3.548584ms)
      ✔ should generate basic code structure when no configs exist
    ✖ should save multiple profiles (1.244375ms)
  ✖ saveAuthConfig (5.195541ms)
      ✔ should generate type definitions for configs and feature flags, not schema, or empty configurations
  ▶ loadAuthConfig
    ✖ should load a single profile (1.872041ms)
    ✔ should load multiple profiles (0.557708ms)
      ✔ should generate function accessor methods for function configs
    ✖ should return null for missing file (0.892375ms)
  ✖ loadAuthConfig (3.501042ms)
  ▶ getActiveProfile
    ✔ should return provided argument first (0.213459ms)
    ✔ should return env var if no argument (0.218459ms)
    ✔ should return "default" if no argument or env var (0.176959ms)
    ✔ should prioritize: arg > env > default (0.188542ms)
  ✔ getActiveProfile (0.921875ms)
✖ token-storage (10.409084ms)
      ✔ should generate durations correctly
      ✔ should prefix method names with underscore when they start with a digit
      ✔ should properly camelCase various key formats
    generate
      ✔ should generate basic code structure when no configs exist
      ✔ should include Mustache import when function configs exist
      ✔ should generate type definitions for configs and feature flags, not schema, or empty configurations
      ✔ should generate function accessor methods for function configs
      ✔ should generate durations correctly
      ✔ should prefix method names with underscore when they start with a digit
      ✔ should properly camelCase various key formats
      ✔ should throw an error when method names conflict

  ReactTypeScriptGenerator
    declarationGenerate
      ✔ should generate basic code structure when no configs exist
      ✔ should generate type definitions for configs and feature flags, not schema, empty configurations, or non-client configs
      ✔ should generate function accessor methods for function configs
      ✔ should generate durations correctly
      ✔ should prefix method names with underscore when they start with a digit
      ✔ should properly camelCase various key formats
    generate
      ✔ should generate basic code structure when no configs exist
      ✔ should include Mustache import when function configs exist
      ✔ should generate type definitions for configs and feature flags, not schema, empty configurations, or non-client configs
      ✔ should generate function accessor methods for function configs
      ✔ should generate durations correctly
      ✔ should prefix method names with underscore when they start with a digit
      ✔ should properly camelCase various key formats
      ✔ should throw an error when method names conflict

  JsonToZodMapper
    resolve
      ✔ should resolve homogeneous array of numbers
      ✔ should resolve homogeneous array of strings
      ✔ should resolve homogeneous array of booleans
      ✔ should resolve heterogeneous array to unknown
      ✔ should resolve object with primitive types
      ✔ should resolve deeply nested objects
      ✔ should resolve array of objects
      ✔ should resolve null values

  ZodToStringMapper
    renderField
      ✔ Can successfully parse strings
      ✔ Can successfully parse numbers
      ✔ Can successfully parse integer numbers
      ✔ Can successfully parse booleans
      ✔ Can successfully parse any
      ✔ Can successfully parse an array wrapped type
      ✔ Can successfully parse an array chained type
      ✔ Can successfully parse an enum
      ✔ Can successfully parse null
      ✔ Can successfully parse undefined
      ✔ Can successfully parse unknown
      ✔ Can successfully parse unions
      ✔ Can successfully parse unions defined with or chaining
      ✔ Can successfully parse tuples
      ✔ Can successfully parse objects
      ✔ Can successfully parse an optional wrapped type
      ✔ Can successfully parse an optional chained type
      ✔ Can successfully parse functions
Unknown zod type: ZodDefault {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    errorMap: [Function: customMap],
    description: undefined,
    innerType: ZodBoolean {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    defaultValue: [Function (anonymous)],
    typeName: 'ZodDefault'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] }
}
      ✔ Can successfully complex combinations of types

  ZodToTypescriptMapper
    renderField
      ✔ Can successfully parse strings
      ✔ Can successfully parse numbers
      ✔ Can successfully parse integer numbers
      ✔ Can successfully parse booleans
      ✔ Can successfully parse any
      ✔ Can successfully parse an array wrapped type
      ✔ Can successfully parse an array chained type
      ✔ Can successfully parse an enum
      ✔ Can successfully parse null
      ✔ Can successfully parse undefined
      ✔ Can successfully parse unknown
      ✔ Can successfully parse unions
      ✔ Can successfully parse unions defined with or chaining
      ✔ Can successfully parse tuples
      ✔ Can successfully parse objects
      ✔ Can successfully parse an optional wrapped type
      ✔ Can successfully parse an optional chained type
      when the target = "accessor"
        ✔ Can successfully parse functions
Unknown zod type: ZodDefault {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    errorMap: [Function: customMap],
    description: undefined,
    innerType: ZodBoolean {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    defaultValue: [Function (anonymous)],
    typeName: 'ZodDefault'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] }
}
        ✔ Can successfully complex combinations of types
      when the target = "raw"
        ✔ Can successfully parse functions
Unknown zod type: ZodDefault {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    errorMap: [Function: customMap],
    description: undefined,
    innerType: ZodBoolean {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    defaultValue: [Function (anonymous)],
    typeName: 'ZodDefault'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] }
}
        ✔ Can successfully complex combinations of types

  ZodToTypescriptReturnValueMapper
    renderField
      ✔ Can successfully parse strings
      ✔ Can successfully parse strings with property paths
      ✔ Can successfully parse numbers
      ✔ Can successfully parse numbers with property paths
      ✔ Can successfully parse integer numbers
      ✔ Can successfully parse integer numbers with property paths
      ✔ Can successfully parse booleans
      ✔ Can successfully parse booleans with property paths
      ✔ Can successfully parse any
      ✔ Can successfully parse any with property paths
      ✔ Can successfully parse an array wrapped type
      ✔ Can successfully parse an array wrapped type with property paths
      ✔ Can successfully parse an array chained type
      ✔ Can successfully parse an array chained type with property paths
      ✔ Can successfully parse an enum
      ✔ Can successfully parse an enum with property paths
      ✔ Can successfully parse null
      ✔ Can successfully parse null with property paths
      ✔ Can successfully parse undefined
      ✔ Can successfully parse undefined with property paths
      ✔ Can successfully parse unknown
      ✔ Can successfully parse unknown with property paths
      ✔ Can successfully parse unions
      ✔ Can successfully parse unions defined with or chaining with property paths
      ✔ Can successfully parse unions defined with or chaining
      ✔ Can successfully parse unions defined with or chaining with property paths
      ✔ Can successfully parse tuples
      ✔ Can successfully parse tuples with property paths
      ✔ Can successfully parse objects
      ✔ Can successfully parse objects with property paths
      ✔ Can successfully parse an optional wrapped type
      ✔ Can successfully parse an optional wrapped type with property paths
      ✔ Can successfully parse an optional chained type
      ✔ Can successfully parse an optional chained type with property paths
      ✔ Can successfully parse functions
      ✔ Can successfully parse functions with property paths
Unknown zod type: ZodDefault {
  spa: [Function: bound safeParseAsync] AsyncFunction,
  _def: {
    errorMap: [Function: customMap],
    description: undefined,
    innerType: ZodBoolean {
      spa: [Function: bound safeParseAsync] AsyncFunction,
      _def: [Object],
      parse: [Function: bound parse],
      safeParse: [Function: bound safeParse],
      parseAsync: [Function: bound parseAsync] AsyncFunction,
      safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
      refine: [Function: bound refine],
      refinement: [Function: bound refinement],
      superRefine: [Function: bound superRefine],
      optional: [Function: bound optional],
      nullable: [Function: bound nullable],
      nullish: [Function: bound nullish],
      array: [Function: bound array],
      promise: [Function: bound promise],
      or: [Function: bound or],
      and: [Function: bound and],
      transform: [Function: bound transform],
      brand: [Function: bound brand],
      default: [Function: bound default],
      catch: [Function: bound catch],
      describe: [Function: bound describe],
      pipe: [Function: bound pipe],
      readonly: [Function: bound readonly],
      isNullable: [Function: bound isNullable],
      isOptional: [Function: bound isOptional],
      '~standard': [Object]
    },
    defaultValue: [Function (anonymous)],
    typeName: 'ZodDefault'
  },
  parse: [Function: bound parse],
  safeParse: [Function: bound safeParse],
  parseAsync: [Function: bound parseAsync] AsyncFunction,
  safeParseAsync: [Function: bound safeParseAsync] AsyncFunction,
  refine: [Function: bound refine],
  refinement: [Function: bound refinement],
  superRefine: [Function: bound superRefine],
  optional: [Function: bound optional],
  nullable: [Function: bound nullable],
  nullish: [Function: bound nullish],
  array: [Function: bound array],
  promise: [Function: bound promise],
  or: [Function: bound or],
  and: [Function: bound and],
  transform: [Function: bound transform],
  brand: [Function: bound brand],
  default: [Function: bound default],
  catch: [Function: bound catch],
  describe: [Function: bound describe],
  pipe: [Function: bound pipe],
  readonly: [Function: bound readonly],
  isNullable: [Function: bound isNullable],
  isOptional: [Function: bound isOptional],
  '~standard': { version: 1, vendor: 'zod', validate: [Function: validate] }
}
      ✔ Can successfully complex combinations of types

  MustacheExtractor
    ✔ extracts simple placeholders
    ✔ handles section with variables
    ✔ handles inverted sections
    ✔ handles complex nested template
    ✔ validates data against generated schema

  SchemaEvaluator
    secureEvaluateSchema
      ✔ should properly evaluate valid schema strings
      ✔ should handle complex schema strings
      ✔ should reject schema strings with syntax errors
      ✔ should reject schema strings with unsupported operations
      ✔ should reject schema strings attempting to use unsupported properties
      ✔ should allow valid refinements with arrow functions
      ✔ should reject schema strings exceeding maximum complexity
      ✔ should handle enum types properly
      ✔ should handle union types

  SchemaExtractor
    execute
      ✔ should use user-defined schema when available
      ✔ should infer schema when no user-defined schema is available
      ✔ should infer a union of schema when multiple schemas are found
      ✔ should use custom duration type map when provided
      ✔ should replace strings with Mustache templates when found
      ✔ should replace strings with a union of Mustache templates when found

  create
    type=boolean-flag
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/flags/v1

  • Request body: {"key":"brand.new.flag","type":"feature_flag","valueType":"bool","sendToClientSdk":true,"variants":[{"value":{"type":"bool","value":true},"name":"True","description":"Enabled"},{"value":{"type":"bool","value":false},"name":"False","description":"Disabled"}],"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":false}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      1) can create a boolean flag
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/flags/v1

  • Request body: {"key":"brand.new.flag","type":"feature_flag","valueType":"bool","sendToClientSdk":true,"variants":[{"value":{"type":"bool","value":true},"name":"True","description":"Enabled"},{"value":{"type":"bool","value":false},"name":"False","description":"Disabled"}],"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":false}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      2) can create a boolean flag and return a JSON response
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/flags/v1

  • Request body: {"key":"new.with.different.default","type":"feature_flag","valueType":"bool","sendToClientSdk":true,"variants":[{"value":{"type":"bool","value":true},"name":"True","description":"Enabled"},{"value":{"type":"bool","value":false},"name":"False","description":"Disabled"}],"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":true}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      3) can create a boolean flag with a true default
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/flags/v1

  • Request body: {"key":"already.in.use","type":"feature_flag","valueType":"bool","sendToClientSdk":true,"variants":[{"value":{"type":"bool","value":true},"name":"True","description":"Enabled"},{"value":{"type":"bool","value":false},"name":"False","description":"Disabled"}],"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":false}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      4) returns an error if the flag exists
[OAuth auth] {"hasAuthConfig":true,"hasAccessToken":true}
[Profile lookup] {"activeProfile":"default","hasProfileData":true,"workspaceId":"workspace-123"}
[JWT lookup] {"foundWorkspace":true,"hasAuthzJwt":true}
      ✔ returns an error if the value is not a boolean
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/flags/v1

  • Request body: {"key":"already.in.use","type":"feature_flag","valueType":"bool","sendToClientSdk":true,"variants":[{"value":{"type":"bool","value":true},"name":"True","description":"Enabled"},{"value":{"type":"bool","value":false},"name":"False","description":"Disabled"}],"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":false}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
{"key":"already.in.use","phase":"creation","serverError":{"message":"Unauthorized","_links":{"self":{"href":"/flags/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}}
      ✔ returns a JSON error if the flag exists
    type=string
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.string","type":"config","valueType":"string","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"string","value":"hello.world"}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      5) can create a string
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"confidential.new.string","type":"config","valueType":"string","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"string","value":"hello.world","confidential":true}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      6) can create a string
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"greeting.from.env","type":"config","valueType":"string","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"string","provided":{"source":"ENV_VAR","lookup":"GREETING"}}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      7) can create a string provided by an env var
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"confidential.greeting.from.env","type":"config","valueType":"string","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"string","provided":{"source":"ENV_VAR","lookup":"GREETING"}}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      8) can create a confidential string provided by an env var
      ✔ shows an error when provided a default and an env-var
    type=int
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.int","type":"config","valueType":"int","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"int","value":"123"}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      9) can create an int
converting...
      ✔ returns an error if the value is not an int
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"int.from.env","type":"config","valueType":"int","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"int","provided":{"source":"ENV_VAR","lookup":"MY_INT"}}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      10) can create an int provided by an env var
    type=double
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.double","type":"config","valueType":"double","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"double","value":123.99}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      11) can create a double
      ✔ returns an error if the value is not a double
    type=boolean
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.boolean","type":"config","valueType":"bool","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"bool","value":false}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      12) can create a boolean
      ✔ returns an error if the value is not a boolean
    type=string-list
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.string-list","type":"config","valueType":"string_list","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"string_list","value":["a","b","c","d"]}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      13) can create a string list
    type=json
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/configs/v1

  • Request body: {"key":"brand.new.json","type":"config","valueType":"json","sendToClientSdk":false,"default":{"rules":[{"criteria":[],"value":{"type":"json","value":{"json":"{\"key\": \"value\"}"}}}]}}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      14) can create a JSON object
      ✔ returns an error if the value is not JSON
    secret
      when no encryption key can be found
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/config/missing.secret.key

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
        15) complains about the missing key
      type=string
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/config/reforge.secrets.encryption.key

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
        16) can create a string
      type=NOT_STRING
        ✔ errors

  download
    when the download server responds successfully
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      17) saves the file and returns a success message
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      18) saves the file and returns JSON
    when the download server does not respond successfully
      19) saves the file and returns a success message
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      20) saves the file and returns JSON
    when the provided environment is invalid
      21) saves the file and returns a success message
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
{"serverError":{"message":"Unauthorized","_links":{"self":{"href":"/environments/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}}
      ✔ saves the file and returns JSON

  generate-new-hex-key
    ✔ generates a new hex key
    ✔ generates JSON output with a new key

  generate
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/download-all-envs

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
Error downloading config: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
ERROR: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
    22) runs generate without flags
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/download-all-envs

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
Error downloading config: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
ERROR: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
    23) generates TypeScript definitions
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/download-all-envs

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
Error downloading config: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
ERROR: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
    24) generates React TypeScript definitions
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/download-all-envs

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
Error downloading config: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
ERROR: Error: Failed to download config: 401
    at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25)
    25) handles invalid targets
    local configuration file parsing
      26) uses default config when no local config file exists
      27) loads and uses valid local config file
      28) falls back to global outputDirectory when target-specific not provided
      29) uses global config as fallback for missing target-specific properties
      30) handles empty targets object
ERROR: CLIError: Error reading reforge.config.json: SyntaxError: Expected property name or '}' in JSON at position 2 (line 1 column 3)
    at Object.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/errors/error.js:37:15)
    at Generate.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:177:23)
    at Generate.readLocalConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:191:22)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:121:33)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25) {
  code: undefined,
  oclif: { exit: 2 },
  skipOclifErrorHandling: undefined,
  suggestions: undefined
}
      ✔ handles invalid JSON in config file
ERROR: CLIError: Error reading reforge.config.json: [
  {
    "code": "invalid_type",
    "expected": "string",
    "received": "number",
    "path": [
      "outputDirectory"
    ],
    "message": "Expected string, received number"
  }
]
    at Object.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/errors/error.js:37:15)
    at Generate.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:177:23)
    at Generate.readLocalConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:191:22)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:121:33)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25) {
  code: undefined,
  oclif: { exit: 2 },
  skipOclifErrorHandling: undefined,
  suggestions: undefined
}
      ✔ validates config schema and rejects invalid types
      31) handles minimal empty config object
      32) handles multiple targets with custom filenames
ERROR: CLIError: Error reading reforge.config.json: Error: EISDIR: illegal operation on a directory, read
    at Object.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/errors/error.js:37:15)
    at Generate.error (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:177:23)
    at Generate.readLocalConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:191:22)
    at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:121:33)
    at async Generate._run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/command.js:311:22)
    at async Config.runCommand (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/core/lib/config/config.js:433:25)
    at async Object.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/@oclif/test/lib/command.js:23:28)
    at async Context.run (/Users/james.kebinger/dev/src/typescript/cli/node_modules/fancy-test/lib/base.js:68:25) {
  code: undefined,
  oclif: { exit: 2 },
  skipOclifErrorHandling: undefined,
  suggestions: undefined
}
      ✔ handles case where config path is a directory

  get
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    33) returns a value for a valid name
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    34) returns JSON for a value for a valid name
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    35) decrypts a secret
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/environments/v1

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    36) shows an error if the key is invalid
    ✔ shows an error if no key is provided when things aren't interactive

  info
    when there are evaluations in the last 24 hours
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      37) returns info for a name
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      38) returns JSON for a name
    when there are no evaluations in the last 24 hours
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      39) returns a message
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      40) returns JSON
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      41) decrypts a secret
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      42) shows [confidential] for confidential items
    when the key does not exist
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      43) returns a message
      44) returns a JSON error

  list
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    45) lists everything by default
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    46) lists only flags
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    47) lists only configs
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    48) lists only log levels
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    49) lists only segments
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    50) lists multiple types

  override
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    51) overrides a boolean flag when given a valid key and value
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    52) overrides a double config when given a valid key and value
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    53) overrides a string list config when given a valid key and value
    54) shows an error when the value type is wrong
    55) shows an error when the key does not exist
    ✔ shows an error when given remove and a value
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    56) removes an override successfully
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
    57) succeeds when trying to remove an override that does not exist

  schema
    ✔ requires an action flag
    get
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/schemas/v1/schema/my.schema

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      58) can get a schema
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/schemas/v1/schema/my.schema

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      59) can get a schema and return JSON
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/schemas/v1/schema/non.existent.schema

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      ✔ handles non-existent schema
    set-zod
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/schemas/v1

  • Request body: {"key":"new.schema","schemaType":"ZOD","schema":"z.string()"}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      60) can create a new schema
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/schemas/v1

  • Request body: {"key":"existing.schema","schemaType":"ZOD","schema":"z.number()"}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      61) can update an existing schema
[MSW] Warning: intercepted a request without a matching request handler:

  • POST https://api.prefab.cloud/schemas/v1

  • Request body: {"key":"new.schema","schemaType":"ZOD","schema":"z.string()"}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      62) can create a schema and return JSON

  serve
    success
      when the context matches a rule
        ✔ succeeds with a valid JSON file an uses the provided context to determine flag state
      when the context does not match a rule
        ✔ succeeds with a valid JSON file an uses the provided context to determine flag state
    file issues
      ✔ shows an error when the file does not exist
      ✔ shows an error when the file is invalid
      ✔ shows an error when the file is invalid

  set-default
    success
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      63) can change the default for a boolean flag
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      64) can change the default for a boolean flag with json output
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      65) can change the default for a string flag
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      66) can change the default for a string flag with json output
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      67) can create a string provided by an env var
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      68) can create a secret string
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      69) uses encryption if any existing value for the key is encrypted
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      70) can update a json config
    failure
      71) shows an error when the key does not exist
      72) shows an error when the value isn't valid for the boolean key
[MSW] Warning: intercepted a request without a matching request handler:

  • GET https://api.prefab.cloud/all-config-types/v1/metadata

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests
      73) shows an error when the value isn't valid for the int key
    parsing errors
      ✔ shows an error if no key is provided when things aren't interactive
      ✔ shows an error if no environment is provided when things aren't interactive
      ✔ shows an error when provided a value and an env-var


  159 passing (3s)
  73 failing

  1) create
       type=boolean-flag
         can create a boolean flag:
     Error: Failed to create boolean flag: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/flags/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.createBooleanFlag (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:166:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  2) create
       type=boolean-flag
         can create a boolean flag and return a JSON response:
     Error: the object {
  "key": "brand.new.flag"
  "phase": "creation"
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/flags/v1"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  3) create
       type=boolean-flag
         can create a boolean flag with a true default:
     Error: Failed to create boolean flag: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/flags/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.createBooleanFlag (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:166:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  4) create
       type=boolean-flag
         returns an error if the flag exists:
     AssertionError: expected 'Failed to create boolean flag: 401 | …' to include 'Failed to create boolean flag: alread…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/create.test.ts:44:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  5) create
       type=string
         can create a string:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  6) create
       type=string
         can create a string:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  7) create
       type=string
         can create a string provided by an env var:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  8) create
       type=string
         can create a confidential string provided by an env var:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  9) create
       type=int
         can create an int:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  10) create
       type=int
         can create an int provided by an env var:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  11) create
       type=double
         can create a double:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  12) create
       type=boolean
         can create a boolean:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  13) create
       type=string-list
         can create a string list:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  14) create
       type=json
         can create a JSON object:
     Error: Failed to create config: 401 | {"message":"Unauthorized","_links":{"self":{"href":"/configs/v1","templated":false}},"_embedded":{"errors":[{"message":"Unauthorized"}]}}
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:115:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  15) create
       secret
         when no encryption key can be found
           complains about the missing key:
     AssertionError: expected 'Failed to fetch encryption key config…' to include 'Failed to create secret: missing.secr…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/create.test.ts:173:42
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  16) create
       secret
         type=string
           can create a string:
     Error: Failed to fetch encryption key config reforge.secrets.encryption.key: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Create.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Create.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Create.resultMessage (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:49:25)
      at Create.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/create.ts:81:30)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Create._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  17) download
       when the download server responds successfully
         saves the file and returns a success message:
     Error: Failed to fetch environments: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Download.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Download.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at getEnvironments (file:///Users/james.kebinger/dev/src/typescript/cli/src/api/get-environments.ts:5:24)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async getEnvironment (file:///Users/james.kebinger/dev/src/typescript/cli/src/ui/get-environment.ts:9:26)
      at async Download.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/download.ts:35:29)
      at async Download._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  18) download
       when the download server responds successfully
         saves the file and returns JSON:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/environments/v1"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  19) download
       when the download server does not respond successfully
         saves the file and returns a success message:
     AssertionError: expected 'Failed to fetch environments: 401' to match /Failed to download file. Status=500/
      at Object.catch (node_modules/fancy-test/lib/catch.js:14:48)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  20) download
       when the download server does not respond successfully
         saves the file and returns JSON:
     AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/download.test.ts:52:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  21) download
       when the provided environment is invalid
         saves the file and returns a success message:
     AssertionError: expected 'Failed to fetch environments: 401' to match /Environment `this.does.not.exist` not found. Valid environments: Production, test/
      at Object.catch (node_modules/fancy-test/lib/catch.js:14:48)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  22) generate
       runs generate without flags:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  23) generate
       generates TypeScript definitions:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  24) generate
       generates React TypeScript definitions:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  25) generate
       handles invalid targets:
     AssertionError: expected 'Failed to download config: 401' to include 'Unsupported target: invalid'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/generate.test.ts:55:34
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  26) generate
       local configuration file parsing
         uses default config when no local config file exists:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  27) generate
       local configuration file parsing
         loads and uses valid local config file:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  28) generate
       local configuration file parsing
         falls back to global outputDirectory when target-specific not provided:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  29) generate
       local configuration file parsing
         uses global config as fallback for missing target-specific properties:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  30) generate
       local configuration file parsing
         handles empty targets object:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  31) generate
       local configuration file parsing
         handles minimal empty config object:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  32) generate
       local configuration file parsing
         handles multiple targets with custom filenames:
     Error: Failed to download config: 401
      at ConfigDownloader.downloadConfig (file:///Users/james.kebinger/dev/src/typescript/cli/src/codegen/config-downloader.ts:10:23)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Generate.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/generate.ts:128:32)
      at async Generate._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  33) get
       returns a value for a valid name:
     Error: Failed to fetch environments: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Get.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Get.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at getEnvironments (file:///Users/james.kebinger/dev/src/typescript/cli/src/api/get-environments.ts:5:24)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async getEnvironment (file:///Users/james.kebinger/dev/src/typescript/cli/src/ui/get-environment.ts:9:26)
      at async Get.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/get.ts:22:29)
      at async Get._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  34) get
       returns JSON for a value for a valid name:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/environments/v1"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  35) get
       decrypts a secret:
     Error: Failed to fetch environments: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Get.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Get.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at getEnvironments (file:///Users/james.kebinger/dev/src/typescript/cli/src/api/get-environments.ts:5:24)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async getEnvironment (file:///Users/james.kebinger/dev/src/typescript/cli/src/ui/get-environment.ts:9:26)
      at async Get.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/get.ts:22:29)
      at async Get._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  36) get
       shows an error if the key is invalid:

      AssertionError: expected 'Failed to fetch environments: 401' to deeply equal 'this-does-not-exist does not exist'
      + expected - actual

      -Failed to fetch environments: 401
      +this-does-not-exist does not exist
      
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/get.test.ts:41:34
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  37) info
       when there are evaluations in the last 24 hours
         returns info for a name:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Info.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Info.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Info.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/info.ts:21:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Info._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  38) info
       when there are evaluations in the last 24 hours
         returns JSON for a name:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/all-config-types/v1/metadata"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  39) info
       when there are no evaluations in the last 24 hours
         returns a message:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Info.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Info.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Info.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/info.ts:21:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Info._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  40) info
       when there are no evaluations in the last 24 hours
         returns JSON:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/all-config-types/v1/metadata"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  41) info
       when there are no evaluations in the last 24 hours
         decrypts a secret:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Info.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Info.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Info.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/info.ts:21:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Info._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  42) info
       when there are no evaluations in the last 24 hours
         shows [confidential] for confidential items:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Info.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Info.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Info.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/info.ts:21:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Info._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  43) info
       when the key does not exist
         returns a message:
     AssertionError: expected 'Failed to fetch configs: 401' to include 'Key this.does.not.exist not found'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/info.test.ts:142:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  44) info
       when the key does not exist
         returns a JSON error:

      AssertionError: expected { serverError: { …(3) } } to deeply equal { Object (error) }
      + expected - actual

       {
      -  "serverError": {
      -    "_embedded": {
      -      "errors": [
      -        {
      -          "message": "Unauthorized"
      -        }
      -      ]
      -    }
      -    "_links": {
      -      "self": {
      -        "href": "/all-config-types/v1/metadata"
      -        "templated": false
      -      }
      -    }
      -    "message": "Unauthorized"
      -  }
      +  "error": "Key this.does.not.exist not found"
       }
      
      at Context.<anonymous> (file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/info.test.ts:153:47)
      at Object.run (node_modules/fancy-test/lib/base.js:44:38)
      at Context.run (node_modules/fancy-test/lib/base.js:68:36)

  45) list
       lists everything by default:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  46) list
       lists only flags:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  47) list
       lists only configs:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  48) list
       lists only log levels:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  49) list
       lists only segments:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  50) list
       lists multiple types:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at List.error (node_modules/@oclif/core/lib/command.js:177:23)
      at List.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at List.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/list.ts:20:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async List._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  51) override
       overrides a boolean flag when given a valid key and value:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Override.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Override.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Override.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/override.ts:32:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Override._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  52) override
       overrides a double config when given a valid key and value:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Override.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Override.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Override.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/override.ts:32:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Override._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  53) override
       overrides a string list config when given a valid key and value:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Override.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Override.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Override.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/override.ts:32:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Override._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  54) override
       shows an error when the value type is wrong:
     AssertionError: expected 'Failed to fetch configs: 401' to include 'Failed to override value: 400 -- is p…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/override.test.ts:40:34
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  55) override
       shows an error when the key does not exist:
     AssertionError: expected 'Failed to fetch configs: 401' to include 'Could not find config named this.does…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/override.test.ts:47:34
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  56) override
       removes an override successfully:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Override.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Override.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Override.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/override.ts:32:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Override._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  57) override
       succeeds when trying to remove an override that does not exist:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Override.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Override.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Override.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/override.ts:32:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Override._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  58) schema
       get
         can get a schema:
     Error: Failed to get schema: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Schema.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Schema.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Schema.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/schema.ts:22:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Schema._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  59) schema
       get
         can get a schema and return JSON:
     Error: the object {
  "name": "my.schema"
  "phase": "get"
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/schemas/v1/schema/my.schema"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  60) schema
       set-zod
         can create a new schema:
     Error: Failed to create schema: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Schema.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Schema.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Schema.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/schema.ts:64:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Schema._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  61) schema
       set-zod
         can update an existing schema:
     Error: Failed to create schema: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at Schema.error (node_modules/@oclif/core/lib/command.js:177:23)
      at Schema.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at Schema.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/schema.ts:64:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Schema._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  62) schema
       set-zod
         can create a schema and return JSON:
     Error: the object {
  "name": "new.schema"
  "phase": "creation"
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/schemas/v1"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  63) set-default
       success
         can change the default for a boolean flag:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  64) set-default
       success
         can change the default for a boolean flag with json output:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/all-config-types/v1/metadata"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  65) set-default
       success
         can change the default for a string flag:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  66) set-default
       success
         can change the default for a string flag with json output:
     Error: the object {
  "serverError": {
    "_embedded": {
      "errors": [
        {
          "message": "Unauthorized"
        }
      ]
    }
    "_links": {
      "self": {
        "href": "/all-config-types/v1/metadata"
        "templated": false
      }
    }
    "message": "Unauthorized"
  }
} was thrown, throw an Error :)
  

  67) set-default
       success
         can create a string provided by an env var:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  68) set-default
       success
         can create a secret string:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  69) set-default
       success
         uses encryption if any existing value for the key is encrypted:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  70) set-default
       success
         can update a json config:
     Error: Failed to fetch configs: 401
      at Object.error (node_modules/@oclif/core/lib/errors/error.js:37:15)
      at SetDefault.error (node_modules/@oclif/core/lib/command.js:177:23)
      at SetDefault.err (file:///Users/james.kebinger/dev/src/typescript/cli/src/index.ts:33:25)
      at SetDefault.run (file:///Users/james.kebinger/dev/src/typescript/cli/src/commands/set-default.ts:53:25)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async SetDefault._run (node_modules/@oclif/core/lib/command.js:311:22)
      at async Config.runCommand (node_modules/@oclif/core/lib/config/config.js:433:25)
      at async Object.run (node_modules/@oclif/test/lib/command.js:23:28)
      at async Context.run (node_modules/fancy-test/lib/base.js:68:25)

  71) set-default
       failure
         shows an error when the key does not exist:
     AssertionError: expected 'Failed to fetch configs: 401' to include 'Could not find config named this.does…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/set-default.test.ts:116:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  72) set-default
       failure
         shows an error when the value isn't valid for the boolean key:
     AssertionError: expected 'Failed to fetch configs: 401' to include '\'cake\' is not a valid value for fea…'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/set-default.test.ts:123:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)

  73) set-default
       failure
         shows an error when the value isn't valid for the int key:
     AssertionError: expected 'Failed to fetch configs: 401' to include 'Invalid default value for int: hello'
      at file:///Users/james.kebinger/dev/src/typescript/cli/test/commands/set-default.test.ts:130:38
      at Object.catch (node_modules/fancy-test/lib/catch.js:20:13)
      at handleError (node_modules/fancy-test/lib/base.js:56:44)
      at Context.run (node_modules/fancy-test/lib/base.js:72:32)



